<!DOCTYPE html>
<html lang="en">
<head >
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>ProductList_DT</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/BillList_TX.css">
  <script src="../js/product_list.js"></script>
  <script>
  var currentPage = 0;
  function goToPage(value){
           currentPage += value;
           console.log(currentPage);
          fetchTable(currentPage*100);
  }
  </script>
<link rel="stylesheet" href="../css/bootstrap.min.css">

<style>
    .badge-notify{
      background:rgb(221, 88, 88);
      position:relative;
      top: -20px;
      right: 10px;
    }
    .my-cart-icon-affix {
      position: fixed;
      z-index: 999;
    }
    </style>
</head>
  <style>
      .tableFixHeight {
        overflow-y: auto;
        height: 690px;
      }
      .tableFixHeight thead th {
        position: sticky;
        top: 0;
      }
      table {
        border-collapse: collapse;
        width: 100%;
      }
      th,
      td {
        padding: 8px 16px;
        border: 1px solid #ccc;
      }
      th {
        background: #eee;
      }
    </style>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light py-3">
        <div class="container">
          <img src="../img/logo.png" class="brand-logo" alt="">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span>
              <i id="bar" class="fas fa-bars"></i>
            </span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent" style="float: right; cursor: pointer;" >
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Trang chủ</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="BillList_KH.html">Đơn hàng</a>
                  </li>
                  <li class="nav-item">
                    <i class="fa fa-user"></i>
                  <i>
                    <span class="glyphicon glyphicon-shopping-cart my-cart-icon"aria-hidden="true"></span>>
                      <span class="badge badge-notify my-cart-badge"></span></span>
                  </i>
              </li>
              
            </div>
        </div>
      </nav>

    <div class="container">
        <div class="form-box-Info">
            <div class="text">
                <br>
                <h1>Danh Sách Sản phẩm</h1>
            </div>
            
    <div class="row">
      <div class="col-sm-12">
        <div class="card shadow mt-5">        
          <div class="tableFixHeight">
          <table class="table table-hover">
            <thead>
              <tr>
                <th class="text-center" scope="col">#</th>
                <th scope="col">Image</th>
                <th scope="col">Mã sản phẩm</th>
                <th scope="col">Tên sản phẩm</th>
                <th scope="col">Giá bán</th>
                <th scope="col">Số lượng tồn</th>
                <th scope="col">&nbsp;</th>
              </tr>
            </thead>
            <tbody id="listProduct"></tbody>
          </table>
          </div>
          <div class="card-footer text-muted">
            <span style="float: right; padding-left: 50px" id="currentPage" ></span>
            <Button onClick="goToPage(1)"  style="float: right">Trang kế</Button>
            <Button onClick="goToPage(-1)" style="float: left" >Trang trước</Button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 
        
</div>

  <script id="entry-template" type="text/x-handlebars-template">
  
    {{#each this}}
    <tr>
        <th scope="row">{{ROWNUMBER}}</th>
        <td><img src="../img/product image 3.png"width="50" height="50"></td>
        <td>{{MaSP}}</td>
        <td>{{TenSP}}</td>
        <td>{{GiaBan}}</td>
        <td>{{SLTon}}</td>
        <td class="text-right">
            <a class="submit-view-btn my-cart-btn"  role="button" data-id="{{MaSP}}" data-name="{{TenSP}}" data-summary="summary 2" data-price="{{GiaBan}}" data-quantity="1" data-image="">
                <i class="fa fa-plus" aria-hidden="true"></i>
            </a>
            <a class="submit-view-btn" href="billinfo.html?MaHD={{MaHD}}" role="button" data-id="{{MaHD}}">
              <i class="fa fa-eye" aria-hidden="true"></i>
            </a>
        </td>
    </tr>
    </div>
    {{/each}}
  </script>
  


  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.1.1/handlebars.min.js"></script>


  <script src="../js/jquery-2.2.3.min.js"></script>
  <script type='text/javascript' src="../js/bootstrap.min.js"></script>
  <script type='text/javascript' src="../js/jquery.mycart.js"></script>
  <script type="text/javascript">
  $(function () {

    var goToCartIcon = function($addTocartBtn){
      var $cartIcon = $(".my-cart-icon");
      var $image = $('<img width="30px" height="30px" src="' + $addTocartBtn.data("image") + '"/>').css({"position": "fixed", "z-index": "999"});
      $addTocartBtn.prepend($image);
      var position = $cartIcon.position();
      $image.animate({
        top: position.top,
        left: position.left
      }, 500 , "linear", function() {
        $image.remove();
      });
    }

    $('.my-cart-btn').myCart({
      currencySymbol: '$',
      classCartIcon: 'my-cart-icon',
      classCartBadge: 'my-cart-badge',
      classProductQuantity: 'my-product-quantity',
      classProductRemove: 'my-product-remove',
      classCheckoutCart: 'my-cart-checkout',
      affixCartIcon: true,
      showCheckoutModal: true,
      numberOfDecimals: 2,
      cartItems: [],
      clickOnAddToCart: function($addTocart){
        goToCartIcon($addTocart);
      },
      afterAddOnCart: function(products, totalPrice, totalQuantity) {
        console.log("afterAddOnCart", products, totalPrice, totalQuantity);
      },
      clickOnCartIcon: function($cartIcon, products, totalPrice, totalQuantity) {
        console.log("cart icon clicked", $cartIcon, products, totalPrice, totalQuantity);
      },
      checkoutCart: function(products, totalPrice, totalQuantity) {
        var checkoutString = "Total Price: " + totalPrice + "\nTotal Quantity: " + totalQuantity;
        checkoutString += "\n\n id \t name \t summary \t price \t quantity \t image path";
        $.each(products, function(){
          checkoutString += ("\n " + this.id + " \t " + this.name + " \t " + this.summary + " \t " + this.price + " \t " + this.quantity + " \t " + this.image);
        });
        alert(checkoutString)
        console.log("checking out", products, totalPrice, totalQuantity);
      },
    });

  });
  </script>
</body>
</html>

<script>
     $(document).ready(function(){  
         goToPage(0)})
</script>


  
